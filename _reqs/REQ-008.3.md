
----------  
# 專案背景與目標

- 專案名稱：BESshow （廟宇祈福網站）
- 專案目的：依最佳實踐原則，以簡潔、快速的方式，開發一個現代化且功能完整的「廟宇網站」。
- 開發策略：採用 MVP（最小可行產品）優先的敏捷開發模式，規劃並提供「可分階段展示」的成果。
- 主要目標：建置廟宇網站，主要提供下列功能：
    + 信眾可以線上點燈並完成付款。
    + 廟宇工作人員可以幫信眾進行點燈，並完成結帳流程。
    + 點燈資料可以同步到由 API 串接的燈牆進行顯示與更新。
    + 廟宇工作人員可以維護信眾資料、訂單（點燈結帳）資料。
    + 廟宇管理人員可以維護（CRUD）燈種資料。
- 專案註記：此專案使用 `https://github.com/wsvincent/lithium.git` 專案範本為基底設計。

# 專案執行方針：

- 以簡潔、穩定為核心想法，逐步完成網站功能，並設計可展示的階段功能。
- 設計切分階段，設計成可交由 AI 輔助執行的步驟，切分階段的重點原則：功能的相依性。請由基礎模組開始建置，以方便進行測試。
- 依功能相依原則，先專注於核心功能「線上點燈」，讓信眾選擇燈種（背景或主動註冊）、並完成線上付款。


# 技術與開發環境：

- 程式語言： Python
- IDE： VS Code + WSL 擴充套件
- Web framework: Django
- DB: PostgreSQL 
- OS: WSL 2 - Ubuntu 24.04 LTS (in Window 11 Pro)
- Python 套件管理： 在 WSL 與 Docker 環境中使用 uv。
- 環境變數管理：
	+ 基底專案建議整合使用 `django-environ` 套件。
    + 所有敏感資訊與環境相關設定都存放在 `.env` 檔案中，該檔案已被加入 `.gitignore`。


# 環境架構與管理（Docker）：

- Docker 規範：
    + 開發與運維環境皆用 Docker 管理。
    + 使用 docker compose V2 指令與語法。
    + `docker-compose.yml` 檔案遵循最新的 **Compose Specification**。（**不包含**頂層的 `version` 屬性）。
    + docker 的 uv.lock 是用 pyproject.toml。（如有需要可轉 requirements.txt）
    + 採用多容器分離架構，初期為 'bes-app' (Django) 和 'bes-rds' (PostgreSQL)，後期為部署加入 `bes-web（Traefik）`。

- 開發環境：Docker 分二個
	+ bes-app: Django （測試 Web + APP）
	+ bes-rds: PostgreSQL (測試 DB)

- 運維環境用：Docker 分三個
    + bes-web: [Container : Traefik ] ← 自動 SSL、路由、反向代理（Reverse Proxy）。
	+ bes-app: [Container : Gunicorn + Django] ← 應用邏輯
	+ bes-rds: [Container : PostgreSQL] ← 資料庫，之後可改使用 AWS RDS: [RDS - PostgreSQL] ← 雲端資料庫

- 上線部署使用 AWS 服務（AWS EC2、AWS RDS...等），AWS 上的 Docker 容器職責分離，於 docker-compose.yml 中明確定義。
---------- 

# 功能需求

**使用者故事：** 
作為使用者（善男：男性、信女：女性、善信：善男信女統稱或二元性別），
我希望能夠於網站上完成線上點燈。流程如下:
- 查詢並顯示可選擇之燈種（光明等、財神燈...等）
- 完成燈種與數量選擇（購物車）
- 結帳前完成善信輸入資料並檢核完善
- 網站系統依其其登入帳號進行結帳
- 如為廟方人員則選擇善信後代入其資料，再進行結帳
- 依顯示的金額掃描 QR Code 進行付款。
- 網站系統顯示結緣清單（訂單），並提供感謝狀（購買收據），格式可為 PDF。


##  下列為開發相關需求：

- 進行開發前，先檢查與確認開發環境與執行階段，如下：
    + 執行階段：需求開發、需求修改、功能開發、功能修改、架構修改、除錯、...等。
    + 開發測試環境：Docker in Windows 11 : WSL 2 - Ubuntu。


## 開發需求 - 依階段

----------
- 開發階段 A01
    + 目標：建立燈種資料維護功能
    + 目的：開發一個廟宇點燈的燈種資料維護功能。提供基本的 CRUD 功能
    + 完成：已建立了一個 /products 的燈種維護功能，完成了最基本的功能展示。
    + 進度：現階段功能OK。
    + 問題：暫無。

----------
- 開發階段 A02
    + 目標：建立信眾個人資料維護功能
    + 目的：提供信眾友善的介面，讓其能自行管理個人資料（如姓名、性別、生日、聯絡方式、地址等）， 而非僅依賴後台管理員操作。
            系統管理員帳號的維護仍透過 Django Admin 進行。
    + 完成： 1. 已可以單純的使用者建立、儲存，並可以於儲存是將國曆轉換成農曆。
            2. 地址的縣市、鄉鎮市區使用下拉選取並可正確的儲存。
    - 進度：現階段功能OK。
    - 問題：暫無。

----------
** 開發階段 A03
	- 目標：建立使用者點燈流程（選擇燈種、數量進購物車，並結賬）
    - 功能說明：
        0. 使用者直接執行點燈。
        1. 列出所有燈種，提供燈種的種類與價格。
        2. 以燈種清單提供選擇，選擇或加入後可修改（包含數量），提供 祈福(結緣)清單維護 即類似商品購物車功能。
        3. 購物車結帳：
            a. 流程功能重點：結帳前，檢查善信（使用者）是否登入
            - 已登入：開啓 詳細會員資料頁面 ，顯示善信個人資料，讓善信編輯、修改與確認存檔。
            - 未登入：開啓 帳號登入（帳號建立）頁面。
                依選擇，如進行登入，依輸入的 email 或 電話進行比對登入。登入後顯示善信個人資料，讓善信編輯、修改與確認存檔。
                如選擇帳號建立，顯示帳號建立頁面，讓善信輸入與編輯個人資料，完成後確認存檔。
            a. 流程功能頁面由 **開發階段 A02** 實作，此處使用參數（如：uuid）連結操作。
            - 善信（會員）資料完善後代入至結帳功能流程
                - 顯示購物車清單
                - 顯示結帳金額
        4. 依顯示的金額掃描 QR Code 進行付款。 **功能建立階段先提供顯示 QR Code 圖片**
        5. 網站系統顯示 祈福(結緣)清單（訂單），並提供感謝狀（購買收據），格式可為 PDF。
        6. BONUS: 考慮加入使用者的個人資料管理功能
    - 進度：現階段基礎功能OK。
    - 問題：暫無。

----------


---------- 
#	執行狀態更新 @2025.09.09
---------- 
## 開發環境 WSL、Docker...等已經建置完成，將持續 Git 至 GitHub。
## 開發階段 A01：初步功能完成。
## 開發階段 A02：初步功能完成。
## 開發階段 A03：初步功能完成。
----------
