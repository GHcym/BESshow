# 優化key暴露風險 步驟 3：設定防護機制

## 具體操作指令
建立 .gitignore 規則，防止敏感檔案未來被意外提交到版本控制系統。

## 輸入參數與說明
- 目標檔案：.gitignore
- 防護範圍：.key/ 目錄及相關敏感檔案
- 規則類型：檔案路徑排除規則

## 執行步驟

### 3.1 檢查現有 .gitignore
```bash
$ cat .gitignore
# OSX #
.DS_Store

# Byte-compiled / optimized / DLL files #
__pycache__/
*.py[cod]
*$py.class

# Django #
*.log
db.sqlite3
media

# Virtual environment
.venv

# Screencast
Lithium_Demo_2025.mp4

# Environment variables
.env
.aider*
```
📝 現有 .gitignore 檔案，但缺乏安全防護規則

### 3.2 添加安全防護規則
在 .gitignore 中添加以下規則：
```
# Security - Private Keys and Certificates
*.pem
*.key
*.p12
*.pfx
*.crt
*.cer
.key/
.ssh/

# AWS Credentials
.aws/credentials
.aws/config
```
✅ 安全規則已添加

### 3.3 提交更新
```bash
$ git add .gitignore && git commit -m "Add security rules to .gitignore - prevent private key exposure"
[main 2a1f448] Add security rules to .gitignore - prevent private key exposure
 1 file changed, 14 insertions(+)
```
✅ .gitignore 更新已提交

### 3.4 測試防護機制
```bash
$ echo "test" > test.pem && git status --porcelain test.pem
(無輸出 - 檔案被忽略)
$ rm test.pem
```
✅ .pem 檔案已被正確忽略

## 輸出結果與說明

### 防護機制結果
- **狀態**：✅ 成功完成
- **防護範圍**：
  - 私鑰檔案：*.pem, *.key
  - 憑證檔案：*.p12, *.pfx, *.crt, *.cer
  - 目錄：.key/, .ssh/
  - AWS 憑證：.aws/credentials, .aws/config
- **測試結果**：防護機制正常運作

### 後續影響
- 未來所有敏感檔案將被自動排除
- 需要重新生成新的安全金鑰對