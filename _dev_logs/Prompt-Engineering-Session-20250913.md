# AI 協作系統設計全記錄 (Prompt Engineering Session Summary)

**文件日期**: 2025年9月13日
**文件目標**: 本文件旨在完整記錄一次關於如何設計、優化及定稿一套先進 AI 協作系統的深度對話，以作為未來參考、學習及迭代的基礎。

---

## 1. 緣起：從僵化的流程開始

我們的討論始於一份名為 `AI-Process-4.0.md` 的文件，該文件定義了一個過於僵化、依賴大量檔案生成的 AI 工作流程。我們迅速識別出其在應對真實開發情境時，缺乏靈活性且效率低下的核心問題。

---

## 2. 核心挑戰與解決方案

在整個對話中，我們聚焦並解決了三大核心挑戰：

### 挑戰一：AI 的「上下文視窗」限制
- **問題**: AI 的短期記憶有限，在長對話中會「遺忘」早期的關鍵資訊。
- **解決方案**: 我們確立了**將外部檔案系統作為 AI 的「長期記憶」**的核心策略。AI 不應依賴自身記憶，而應在需要時主動讀取參考文件（如計畫、日誌、程式碼）來獲取準確上下文。

### 挑戰二：記錄的「完整性」與「可讀性」的矛盾
- **問題**: 開發者需要完整的執行記錄（用於除錯和學習），但過於詳細的日誌會降低核心任務檔案的可讀性。
- **解決方案**: 我們設計了「**主文檔 + 附屬日誌**」的創新策略。
    - **主任務文檔**: 作為人類可讀的「故事線」，記錄目標、計畫和總結。
    - **附屬執行日誌**: 作為 100% 完整的「黑盒子」，儲存所有指令和未經刪減的原始輸出，並由主文檔連結引用。

### 挑戰三：AI 行為的「可靠性」與「靈活性」的平衡
- **問題**: 如何讓 AI 在簡單問答時保持輕快，在複雜任務中又能確保嚴謹？
- **解決方案**: 我們設計了「**雙模式、按需載入**」的系統。
    - **通用專家模式**: 一個預設的、輕量化的 AI 角色，用於日常快速問答。
    - **嚴謹專案模式**: 一套完整的、包含上述所有策略的工作流程，在需要時由使用者透過特定指令「載入」，將 AI 切換為專案執行者。

---

## 3. 最終產出：雙模式協作系統

經過反覆的迭代和優化，我們最終產出了兩個核心設定檔，共同構成了這套系統：

1.  **`_aiprompt/prompt_default.md`**: 定義了預設的「通用專家模式」。它知識淵博、反應迅速，並被賦予了「智能分流」的能力，可以在發現任務變得複雜時，主動建議使用者切換到專案模式。

2.  **`_aiprompt/prompt_project_workflow.md`**: 定義了按需載入的「嚴謹專案模式」。它包含了完整的工作流程（初始化、執行、歸檔、繼續、終結），並明確授權 AI 在獲得使用者同意的前提下，擁有自主任務拆解的能力。

這兩個檔案互相感知、分工明確，構成了一個完整、強大且高度可靠的協作框架。

---

## 4. 核心工作流程速覽

最終確定的「嚴謹專案模式」包含五個階段：
1.  **任務初始化**: 使用者觸發，共同建立主任務文檔。
2.  **任務執行**: AI 拆解子步驟，與使用者互動執行。
3.  **階段完成與歸檔**: 使用者觸發，AI 儲存附屬日誌並更新主文檔。
4.  **任務繼續**: 在新對話中，使用者觸發，AI 讀取主文檔以恢復進度。
5.  **任務終結**: 使用者觸發，AI 完成最後歸檔並輸出引導使用者開啟新對話的結束語。

---

## 5. 結論

本次對話不僅解決了最初的 Prompt 設計問題，更透過深入的思考和共同創造，建立了一套涵蓋了上下文管理、日誌策略、模式切換和流程閉環的完整 AI 協作方法論。這套系統將成為未來高效、精準地利用 AI 完成複雜軟體開發任務的堅實基礎。
