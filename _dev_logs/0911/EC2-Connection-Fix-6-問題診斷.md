# 步驟 6：問題診斷

## 診斷結果分析

### 🔍 已確認的問題
1. **完全無法連通**：
   - ICMP ping: 100% packet loss
   - TCP 連接埠 22: Connection timed out
   - TCP 連接埠 80: Connection timed out

### 🎯 可能原因排序（依機率高低）

#### 1. 實例已停止 (機率: 高)
- **症狀**：所有網路連接完全失敗
- **原因**：實例處於 stopped 或 terminated 狀態
- **驗證方法**：AWS Console 檢查實例狀態

#### 2. 安全群組設定問題 (機率: 高)
- **症狀**：連接埠完全無法存取
- **原因**：安全群組未開放必要連接埠
- **驗證方法**：檢查安全群組入站規則

#### 3. 網路 ACL 問題 (機率: 中)
- **症狀**：子網路層級的流量阻擋
- **原因**：網路 ACL 設定過於嚴格
- **驗證方法**：檢查子網路關聯的網路 ACL

#### 4. 實例內部防火牆 (機率: 低)
- **症狀**：實例運行但服務無法存取
- **原因**：iptables 或 ufw 阻擋連線
- **驗證方法**：需要透過 AWS Systems Manager 或序列主控台存取

#### 5. 路由表問題 (機率: 低)
- **症狀**：網路路由設定錯誤
- **原因**：路由表缺少網際網路閘道路由
- **驗證方法**：檢查子網路路由表設定

### 🚨 緊急程度評估
- **高**：如果是生產環境服務
- **中**：如果是開發/測試環境
- **低**：如果是個人學習環境